{% extends 'base.html' %}
{% block content %}
<style>
/* Page background */
.history-page {
    min-height: 100vh;
    padding: 2rem;
    background: linear-gradient(135deg, #f0f8ff, #e0f0ff);
    position: relative;
    overflow: hidden;
}

/* Floating background shapes */
@keyframes float {
    0% { transform: translateY(0px) rotate(0deg); opacity: 0.6; }
    50% { transform: translateY(-20px) rotate(180deg); opacity: 0.4; }
    100% { transform: translateY(0px) rotate(360deg); opacity: 0.6; }
}
.floating-shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(0, 123, 255, 0.1);
    animation: float 6s ease-in-out infinite;
}

/* Card styling */
.history-card {
    background: #fff;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    transition: transform 0.3s, box-shadow 0.3s;
}
.history-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 60px rgba(0,0,0,0.15);
}

/* Table styling */
.table-hover tbody tr {
    transition: all 0.3s ease;
}
.table-hover tbody tr:hover {
    background: linear-gradient(90deg, rgba(0,123,255,0.1), rgba(0,200,255,0.1));
    transform: scale(1.02);
}
.table th, .table td {
    vertical-align: middle;
}

/* Heading */
.history-page h3 {
    color: #007BFF;
    margin-bottom: 1.5rem;
    font-weight: 600;
}
</style>

<div class="history-page">
    <h3>Syringe History - {{ syringe.syringe_id }}</h3>
    <div class="card history-card mt-3">
        <div class="card-body">
            <table class="table table-hover table-striped">
                <thead class="table-secondary">
                    <tr>
                        <th>Old Status</th>
                        <th>New Status</th>
                        <th>Updated By</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in history %}
                    <tr>
                        <td>{{ record.old_status }}</td>
                        <td>{{ record.new_status }}</td>
                        <td>{{ record.updated_by }}</td>
                        <td>{{ record.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center">No history records found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
// Floating background shapes
const historyPage = document.querySelector('.history-page');
const colors = ['rgba(0,123,255,0.1)', 'rgba(0,200,255,0.1)', 'rgba(100,149,237,0.1)'];

for (let i=0; i<15; i++) {
    const div = document.createElement('div');
    div.className = 'floating-shape';
    const size = Math.random()*40 + 20;
    div.style.width = `${size}px`;
    div.style.height = `${size}px`;
    div.style.top = `${Math.random()*100}%`;
    div.style.left = `${Math.random()*100}%`;
    div.style.background = colors[Math.floor(Math.random()*colors.length)];
    div.style.animationDuration = `${5 + Math.random()*5}s`;
    historyPage.appendChild(div);
}
</script>
{% endblock %}
